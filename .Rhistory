# --- Librerías ---
library(ggplot2)
library(dplyr)
library(tidyr)
library(ggthemes)
library(latex2exp)
# --- Parámetros ---
n_alternatives <- 7
n_criteria <- 5
emin <- 1
emax <- 5
# --- Matriz de desempeño (casos teóricos + intermedios) ---
E <- matrix(c(
1, 1, 1, 1, 1,   # constante baja → min amplitud
5, 5, 5, 5, 5,   # constante alta → min amplitud
1, 2, 3, 4, 5,   # creciente
5, 4, 3, 2, 1,   # decreciente
1, 5, 5, 5, 5,   # máx amplitud (-,+)
5, 1, 1, 1, 1,   # máx amplitud (+,-)
3, 5, 5, 5, 5
), nrow = n_alternatives, byrow = TRUE)
rownames(E) <- c(
"A1\nMin. Width - Low Constant\ne=(1,1,1,1,1)",
"A2\nMin. Width - High Constant\ne=(5,5,5,5,5)",
"A3\nCriteria-reversed\ne=(1,2,3,4,5)",
"A4\nCriteria-aligned\ne=(5,4,3,2,1)",
"A5 \nMax. Width (-,+)\ne=(1,5,5,5,5)",
"A6\nMax. Width (+,-)\ne=(5,1,1,1,1)",
"A7\nIntersection point (+,-)\ne=(3,5,5,5,5)"
)
# --- Función para promedios prefijos ---
prefix_averages <- function(e) {
cumsum(e) / seq_along(e)
}
# --- Calcular s-, s+, amplitud ---
s_minus <- s_plus <- s_middle <- amplitude <- numeric(n_alternatives)
for (i in 1:n_alternatives) {
A <- prefix_averages(E[i, ])
minA = min(A)
maxA = max(A)
s_minus[i] <- minA
s_plus[i] <- maxA
amplitude[i] <- maxA - minA
s_middle[i] <- (maxA + minA)/2
}
df_case <- data.frame(
Alternative = rownames(E),
ShortName = paste0("A", seq(1,n_alternatives)),
Type = "Defined cases",
s_minus = s_minus,
s_plus = s_plus,
s_middle = s_middle,
amplitude = amplitude
) %>% mutate(Alternative = factor(Alternative, levels = rev(rownames(E))))
View(df_case)
# --- Librerías ---
library(ggplot2)
library(dplyr)
library(tidyr)
library(ggthemes)
library(latex2exp)
# --- Parámetros ---
n_alternatives <- 7
n_criteria <- 5
emin <- 1
emax <- 5
# --- Matriz de desempeño (casos teóricos + intermedios) ---
E <- matrix(c(
1, 1, 1, 1, 1,   # constante baja → min amplitud
5, 5, 5, 5, 5,   # constante alta → min amplitud
1, 2, 3, 4, 5,   # creciente
5, 4, 3, 2, 1,   # decreciente
1, 5, 5, 5, 5,   # máx amplitud (-,+)
5, 1, 1, 1, 1,   # máx amplitud (+,-)
3, 5, 5, 5, 5
), nrow = n_alternatives, byrow = TRUE)
rownames(E) <- c(
"A1\nMin. Width - Low Constant\ne=(1,1,1,1,1)",
"A2\nMin. Width - High Constant\ne=(5,5,5,5,5)",
"A3\nCriteria-reversed\ne=(1,2,3,4,5)",
"A4\nCriteria-aligned\ne=(5,4,3,2,1)",
"A5 \nMax. Width (-,+)\ne=(1,5,5,5,5)",
"A6\nMax. Width (+,-)\ne=(5,1,1,1,1)",
"A7\nIntersection point (+,-)\ne=(3,5,5,5,5)"
)
# --- Función para promedios prefijos ---
prefix_averages <- function(e) {
cumsum(e) / seq_along(e)
}
# --- Calcular s-, s+, amplitud ---
s_minus <- s_plus <- s_middle <- amplitude <- numeric(n_alternatives)
for (i in 1:n_alternatives) {
A <- prefix_averages(E[i, ])
minA = min(A)
maxA = max(A)
s_minus[i] <- minA
s_plus[i] <- maxA
amplitude[i] <- maxA - minA
s_middle[i] <- (maxA + minA)/2
}
df_case <- data.frame(
Alternative = rownames(E),
ShortName = paste0("A", seq(1,n_alternatives)),
Type = "Defined cases",
s_minus = s_minus,
s_plus = s_plus,
s_middle = s_middle,
amplitude = amplitude
) %>% mutate(Alternative = factor(Alternative, levels = rev(rownames(E))))
# --- Gráfico 1: Intervalos horizontales (tipo WIBA) ---
p1 <- ggplot(df_case) +
geom_segment(aes(y = Alternative, yend = Alternative,
x = s_minus, xend = s_plus),
color = "black", linewidth = 0.5) +
geom_point(aes(x = s_minus, y = Alternative), size = 2) +
geom_point(aes(x = s_plus, y = Alternative), size = 2) +
geom_point(aes(x = s_middle, y = Alternative), size = 2, shape = "|") +
ggthemes::theme_clean(base_size = 13)+
labs(
title = "Score Intervals per Alternative",
x = "Score",
y = "Alternative"
) +
theme(
plot.background = element_blank()
)
# --- Mostrar resultados y gráficos ---
print(df_case)
print(p1)
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
# --- Librerías ---
library(ggplot2)
library(dplyr)
library(tidyr)
library(ggthemes)
library(latex2exp)
# --- Parámetros ---
n_alternatives <- 7
n_criteria <- 5
emin <- 1
emax <- 5
# --- Matriz de desempeño (casos teóricos + intermedios) ---
E <- matrix(c(
1, 1, 1, 1, 1,   # constante baja → min amplitud
5, 5, 5, 5, 5,   # constante alta → min amplitud
1, 2, 3, 4, 5,   # creciente
5, 4, 3, 2, 1,   # decreciente
1, 5, 5, 5, 5,   # máx amplitud (-,+)
5, 1, 1, 1, 1,   # máx amplitud (+,-)
3, 5, 5, 5, 5
), nrow = n_alternatives, byrow = TRUE)
rownames(E) <- c(
"A1\nMin. Width - Low Constant\ne=(1,1,1,1,1)",
"A2\nMin. Width - High Constant\ne=(5,5,5,5,5)",
"A3\nCriteria-reversed\ne=(1,2,3,4,5)",
"A4\nCriteria-aligned\ne=(5,4,3,2,1)",
"A5 \nMax. Width (-,+)\ne=(1,5,5,5,5)",
"A6\nMax. Width (+,-)\ne=(5,1,1,1,1)",
"A7\nIntersection point (+,-)\ne=(3,5,5,5,5)"
)
# --- Función para promedios prefijos ---
prefix_averages <- function(e) {
cumsum(e) / seq_along(e)
}
# --- Calcular s-, s+, amplitud ---
s_minus <- s_plus <- s_middle <- amplitude <- numeric(n_alternatives)
for (i in 1:n_alternatives) {
A <- prefix_averages(E[i, ])
minA = min(A)
maxA = max(A)
s_minus[i] <- minA
s_plus[i] <- maxA
amplitude[i] <- maxA - minA
s_middle[i] <- (maxA + minA)/2
}
df_case <- data.frame(
Alternative = rownames(E),
ShortName = paste0("A", seq(1,n_alternatives)),
Type = "Defined cases",
s_minus = s_minus,
s_plus = s_plus,
s_middle = s_middle,
amplitude = amplitude
) %>% mutate(Alternative = factor(Alternative, levels = rev(rownames(E))))
# --- Gráfico 1: Intervalos horizontales (tipo WIBA) ---
p1 <- ggplot(df_case) +
geom_segment(aes(y = Alternative, yend = Alternative,
x = s_minus, xend = s_plus),
color = "black", linewidth = 0.5) +
geom_point(aes(x = s_minus, y = Alternative), size = 2, shape = "|") +
geom_point(aes(x = s_plus, y = Alternative), size = 2, shape = "|") +
geom_point(aes(x = s_middle, y = Alternative), size = 2) +
ggthemes::theme_clean(base_size = 13)+
labs(
title = "Score Intervals per Alternative",
x = "Score",
y = "Alternative"
) +
theme(
plot.background = element_blank()
)
# --- Mostrar resultados y gráficos ---
print(df_case)
print(p1)
ggsave(filename = "intervals.pdf", plot=p1, width = 7, height = 4.5)
# --- Librerías ---
library(ggplot2)
library(dplyr)
library(tidyr)
library(ggthemes)
library(latex2exp)
# --- Parámetros ---
n_alternatives <- 7
n_criteria <- 5
emin <- 1
emax <- 5
# --- Matriz de desempeño (casos teóricos + intermedios) ---
E <- matrix(c(
1, 1, 1, 1, 1,   # constante baja → min amplitud
5, 5, 5, 5, 5,   # constante alta → min amplitud
1, 2, 3, 4, 5,   # creciente
5, 4, 3, 2, 1,   # decreciente
1, 5, 5, 5, 5,   # máx amplitud (-,+)
5, 1, 1, 1, 1,   # máx amplitud (+,-)
3, 5, 5, 5, 5
), nrow = n_alternatives, byrow = TRUE)
rownames(E) <- c(
"A1\nMin. Width - Low Constant\ne=(1,1,1,1,1)",
"A2\nMin. Width - High Constant\ne=(5,5,5,5,5)",
"A3\nCriteria-reversed\ne=(1,2,3,4,5)",
"A4\nCriteria-aligned\ne=(5,4,3,2,1)",
"A5 \nMax. Width (-,+)\ne=(1,5,5,5,5)",
"A6\nMax. Width (+,-)\ne=(5,1,1,1,1)",
"A7\nIntersection point (+,-)\ne=(3,5,5,5,5)"
)
# --- Función para promedios prefijos ---
prefix_averages <- function(e) {
cumsum(e) / seq_along(e)
}
# --- Calcular s-, s+, amplitud ---
s_minus <- s_plus <- s_middle <- amplitude <- numeric(n_alternatives)
for (i in 1:n_alternatives) {
A <- prefix_averages(E[i, ])
minA = min(A)
maxA = max(A)
s_minus[i] <- minA
s_plus[i] <- maxA
amplitude[i] <- maxA - minA
s_middle[i] <- (maxA + minA)/2
}
df_case <- data.frame(
Alternative = rownames(E),
ShortName = paste0("A", seq(1,n_alternatives)),
Type = "Defined cases",
s_minus = s_minus,
s_plus = s_plus,
s_middle = s_middle,
amplitude = amplitude
) %>% mutate(Alternative = factor(Alternative, levels = rev(rownames(E))))
# --- Gráfico 1: Intervalos horizontales (tipo WIBA) ---
p1 <- ggplot(df_case) +
geom_segment(aes(y = Alternative, yend = Alternative,
x = s_minus, xend = s_plus),
color = "black", linewidth = 0.5) +
geom_point(aes(x = s_minus, y = Alternative), size = 2, shape = "|") +
geom_point(aes(x = s_plus, y = Alternative), size = 2, shape = "|") +
geom_point(aes(x = s_middle, y = Alternative), size = 2) +
ggthemes::theme_clean(base_size = 13)+
labs(
title = "Score Intervals per Alternative",
x = "Score",
y = "Alternative"
) +
theme(
plot.background = element_blank()
)
# --- Mostrar resultados y gráficos ---
print(df_case)
print(p1)
ggsave(filename = "intervals.pdf", plot=p1, width = 7, height = 4.5)
middle_width = mean(range(df_case$amplitude))
middle_s_middle = mean(range(df_case$s_middle))
# --- DEPENDENCIAS ---
# Instala si es necesario
library(lhs)
library(randtoolbox)
# --- PARÁMETROS ---
n_samples <- 50000
# --- MUESTREO SOBOL / LHS ---
set.seed(123)
sampler_used <- "LHS"
# Try Sobol first, fallback to LHS
if(sampler_used == "Sobol"){
sobol_points <- sobol(n = n_samples, dim = n_criteria, seed = 123, normal = FALSE)
samples <- sobol_points
} else{
samples <- randomLHS(n_samples, n_criteria)
sampler_used <- "LHS"
}
# Map to [emin, emax]
E <- emin + (emax - emin) * samples
# --- FUNCIONES AUXILIARES ---
prefix_averages <- function(e) {
cumsum(e) / seq_along(e)
}
compute_bounds <- function(e) {
A <- prefix_averages(e)
s_minus <- min(A)
s_plus  <- max(A)
s_middle <- (s_plus + s_minus)/2
amplitude <- s_plus - s_minus
return(c(s_minus, s_plus, s_middle, amplitude))
}
# --- CÁLCULO DE S- Y AMPLITUD ---
results <- t(apply(E, 1, compute_bounds))
colnames(results) <- c("s_minus", "s_plus", "amplitude")
middle_width = mean(range(df_case$amplitude))
middle_s_middle = mean(range(df_case$s_middle))
# --- DEPENDENCIAS ---
# Instala si es necesario
library(lhs)
library(randtoolbox)
# --- PARÁMETROS ---
n_samples <- 50000
# --- MUESTREO SOBOL / LHS ---
set.seed(123)
sampler_used <- "LHS"
# Try Sobol first, fallback to LHS
if(sampler_used == "Sobol"){
sobol_points <- sobol(n = n_samples, dim = n_criteria, seed = 123, normal = FALSE)
samples <- sobol_points
} else{
samples <- randomLHS(n_samples, n_criteria)
sampler_used <- "LHS"
}
E <- emin + (emax - emin) * samples
# --- FUNCIONES AUXILIARES ---
prefix_averages <- function(e) {
cumsum(e) / seq_along(e)
}
compute_bounds <- function(e) {
A <- prefix_averages(e)
s_minus <- min(A)
s_plus  <- max(A)
s_middle <- (s_plus + s_minus)/2
amplitude <- s_plus - s_minus
return(c(s_minus, s_plus, s_middle, amplitude))
}
# --- CÁLCULO DE S- Y AMPLITUD ---
results <- t(apply(E, 1, compute_bounds))
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
df %>% ggplot(aes(x=s_minus, y=s_plus, color=s_middle)) + geom_point()
df %>% ggplot(aes(x=s_minus, y=s_plus, color=amplitude)) + geom_point()
df %>% ggplot(aes(x=s_minus, y=s_plus, color=amplitude)) + geom_point(alpha=0.3)
df %>% ggplot(aes(x=s_plus, y=amplitude, color=s_middle)) + geom_point(alpha=0.3)
df %>% ggplot(aes(x=s_middle, y=amplitude)) + geom_point(alpha=0.3)
df %>% ggplot(aes(x=s_middle, y=amplitude, color=s_minus)) + geom_point(alpha=0.3)
df %>% ggplot(aes(x=s_middle, y=amplitude, color=(s_middle - 0.01*amplitude))) + geom_point(alpha=0.3)
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
4 %% 2
4/2
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
library(xtable)
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
df_int_plot
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
df_int_plot <- df_case %>%
select(-("Type")) %>%
mutate(
Description = Alternative
) %>%
rename(
"Alternative" = ShortName,
"Min. S" = s_minus,
"Max. S" = s_plus,
"Mid. S" = s_middle,
"Interval Width" = amplitude
)
df_int_plot <- df_case %>%
mutate(
Description = Alternative
) %>%
select(-c("Type", "Alternative")) %>%
rename(
"Alternative" = ShortName,
"Min. S" = s_minus,
"Max. S" = s_plus,
"Mid. S" = s_middle,
"Interval Width" = amplitude
)
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
print(xtable(df_case), include.rownames = FALSE)
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
E
E[1,:]
E[1,]
paste0(E[1,], collapse = ", ")
paste0("e=(", paste0(E[1,], collapse = ", "), ")")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
df_case <- data.frame(
Alternative = rownames(E),
ShortName = paste0("A", seq(1,n_alternatives)),
Type = "Defined cases",
s_minus = s_minus,
s_plus = s_plus,
s_middle = s_middle,
amplitude = amplitude,
ei = ejs
) %>% mutate(ShortName = factor(ShortName, levels = rev(ShortName)))
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
# --- Gráfico 1: Intervalos horizontales (tipo WIBA) ---
p1 <- ggplot(df_int_plot) +
geom_segment(aes(y = Alternative, yend = Alternative,
x = `Min. s`, xend = `Max. s`),
color = "#648FFF", linewidth = 3, alpha=0.3) +
geom_segment(aes(y = Alternative, yend = Alternative,
x = `Min. s`, xend = `Max. s`),
color = "#648FFF", linewidth = 0.5) +
geom_point(aes(x = `Min. s`, y = Alternative), size = 2) +
geom_point(aes(x = `Max. s`, y = Alternative), size = 2) +
geom_point(aes(x = `Mid. s`, y = Alternative), size = 2, shape = 3) +
ggthemes::theme_clean(base_size = 13)+
labs(
title = "a) Score Intervals per Alternative",
x = "Score",
y = "Alternative"
) +
theme(
plot.background = element_blank(),
plot.title = element_text(hjust = 0.5)
)
print(p1)
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
print(p1)
print(p1)
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
ggsave(filename = "all.pdf", plot=p_all, width = 5, height = 7)
ggsave(filename = "all.pdf", plot=p_all, width = 6, height = 7)
ggsave(filename = "all.pdf", plot=p_all, width = 7, height = 8)
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
source("~/RStudio/wiba-interval-width-analysis/wiba_analysis.R")
View(E)
df_samples <- as.data.frame(E) %>% bind_cols(df)
View(df_samples)
